- 再帰呼び出しやdo/while相当の処理はloopモジュールのマクロを通じてのみ行う。
    - loopすらもimportしないとできない
    - 有限の集合に対するfor inは使用できる
- 別言語埋め込みとコメントのためにhere documentみたいな機能はやっぱ欲しいかも

- 理想
    - コピペで作るようなコードでも綺麗に管理できる世界を作りたい
        - <https://twitter.com/sesere115/status/1535822361316184065>
            - > 優秀な人は技術に対して真摯だからハードルを上げる方向に圧力をかけがちなんですが、プログラム10年書いてる僕はDockerほぼコピペだし、jsも半分以上コピペだし、そもそもgemとか究極のコピペだし 「動きゃいいんだよ動きゃ」の精神で全然いいと思いますけどね 誰しも上を目指したい訳じゃないですし

# 細かい設計

- shadowingについて:
    - トップレベル・importしたもののshadowingは禁止する？
    - あるいはimportしたもののみ？
- 変数いじる系のform, どうしようかなぁ。
    - `const`, `let`, `assign` で行こう。`shadow`や`letRec`もほしいっちゃ欲しいんだけど、とりあえず後回しで
- `if`など文と式の仕様
    - 条件節はTrue/Falseのみ（assertions実装時に実装）
    - できれば三項演算子を出力したい: 要らんこと考えずに三項演算子を出力すればいい？
        - blockの文脈では`if`を出す、が理想だけど
        - 当面は、式としての`if`は三項演算子で、文として`True`の場合だけのものを`ifThen`として提供しよう
            - 文としてだけ使えるマクロと、式として使えるマクロを区別しような
                - 文
                    - [ ] `let`, `const`, `return`
                    - まだ実装しない: `break`, `continue`
                - 文を受け取る文
                    - [ ] `ifThen`
                    - まだ実装しない: `for`, `while`
                - 文を受け取る式（最後の文は式でないとならない）
                    - [x] `scope`, `fn`
                - 文を受け取る式（最後の文は式でなくてよい）
                    - [ ] `procedure`: 戻り値のない関数
                - 式: それ以外（もろもろ。`if`など）
- 二項演算子系マクロ:
    - `calcF`だけじゃなくて`cmp`もいるか

# TODO

- [ ] そういえば、余分な引数を与えた場合のテストケースがないな。そして多分エラーにならないだろう
    - 算術演算子や比較演算子は後回し（`exprF`を使う限り問題ないので）
    - [x] `let`
    - [x] `const`
    - [x] `assign`
- [x] よくよく考えたら、`if`は三項演算子にしたから`if/else`じゃなくしたけど、カンマ演算子を使えば複数の式を仕込めるのでは？
